"use strict";angular.module("appagooApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","app.filters","ui.bootstrap-slider","ngDialog","directive.g+signin","ui.bootstrap"]).config(["$routeProvider","$interpolateProvider","$httpProvider","$resourceProvider","ngDialogProvider",function(a,b,c,d,e){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"}),b.startSymbol("[[").endSymbol("]]"),c.defaults.xsrfCookieName="csrftoken",c.defaults.xsrfHeaderName="X-CSRFToken",c.defaults.withCredentials=!0,d.defaults.stripTrailingSlashes=!1,e.setForceBodyReload(!0)}]),angular.module("appagooApp").controller("MainCtrl",["$scope","$state","$stateParams","loginService","$http",function(a,b,c,d,e){a.$state=b,a.$stateParams=c,a.ls=d,a.login={working:!1},a.loginBK=function(b){"google"==b&&OAuth.popup("google",function(c,f){if(c);else{var g="Token "+f.access_token,h=e({method:"POST",url:"http://127.0.0.1:8000/api-token/login/"+b+"/",headers:{Authorization:g}});a.login.working=!0,d.loginUser(h),h.success(function(){a.login={working:!1}}),h["finally"](function(){a.login.working=!1})}})},a.logoutMe=function(){d.logoutUser(e.get("http://127.0.0.1:8000/api-token/logout"))},a.$on("$stateChangeSuccess",function(b,c){angular.isDefined(c.data.pageTitle)&&(a.pageTitle=c.data.pageTitle+" | Welcome")}),OAuth.initialize("your oauth.io key")}]),angular.module("appagooApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("appagooApp").controller("ProfileCtrl",["$scope","$http","$cookies",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var c=function(){b.get("/api/profiles/?format=json").then(function(b){a.profiles=b.data})};a.profilUpdate=function(a){b.put("/api/profiles/"+a.id+"/",a)},c(),a.$on("user:login",function(){a.authenticated=!0,c()})}]),angular.module("appagooApp").controller("StoreCtrl",["$scope","$http","$filter","$cookies",function(a,b,c){function d(a,b){var c=a.indexOf(b);return c>-1&&a.splice(c,1),a}a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var e=function(){b.get("/api/profiles/?format=json").then(function(b){a.profiles=b.data,h()})};a.profilUpdate=function(c){a.authenticated&&(b.put("/api/profiles/"+c.id+"/",c),j()),h()},e(),a.$on("user:login",function(){a.authenticated=!0,e(),j()});var f=c("makeFilterItems");a.name="",a.priceFilter={free:!0,commercial:!1},a.filters={order:"score",minRate:.25,categories:[1],price:0},a.filter={check:[],chosen:{},unchosen:{}},a.currentPage=1,a.totalItems=5e5,a.numPerPage=18,a.maxSize=5,a.changed=function(){h()},a.$watch("name",function(){a.currentPage=1,h()}),a.$watch("filters.order",function(){h()}),a.$watch("filters.minRate",function(){a.currentPage=1,h()}),a.$watch("priceFilter.free",function(){a.currentPage=1,i(),h()}),a.$watch("priceFilter.commercial",function(){a.currentPage=1,i(),h()}),a.$watch("filters.categories.length",function(){h()});var g=function(){b.get("/api/categories/?format=json").then(function(b){a.categories=b.data,a.filter=f(a.categories,"label",!0)})};g();var h=function(){null!=a.profiles&&(""==a.name?b.get("/api/applications/?format=json&minRate="+(a.filters.minRate-.25)+"&order="+a.filters.order+"&categories="+a.filters.categories+"&page="+a.currentPage+"&price="+a.filters.price+"&profile="+(10-a.profiles[0].value)+","+(10-a.profiles[1].value)+","+(10-a.profiles[2].value)+","+(10-a.profiles[3].value)+","+(10-a.profiles[4].value)+","+(10-a.profiles[5].value)+","+(10-a.profiles[6].value)).then(function(b){a.applications=b.data.results,a.totalItems=b.data.count}):b.get("/api/applications/?format=json&minRate="+(a.filters.minRate-.25)+"&order="+a.filters.order+"&categories="+a.filters.categories+"&page="+a.currentPage+"&price="+a.filters.price+"&profile="+(10-a.profiles[0].value)+","+(10-a.profiles[1].value)+","+(10-a.profiles[2].value)+","+(10-a.profiles[3].value)+","+(10-a.profiles[4].value)+","+(10-a.profiles[5].value)+","+(10-a.profiles[6].value)+"&name="+a.name).then(function(b){a.applications=b.data.results,a.totalItems=b.data.count}))};a.changeCommercialPriceFilter=function(){a.priceFilter.commercial=!a.priceFilter.commercial,i()},a.changeFreePriceFilter=function(){a.priceFilter.free=!a.priceFilter.free,i()};var i=function(){a.priceFilter.free&&a.priceFilter.commercial&&(a.filters.price=2),a.priceFilter.free||a.priceFilter.commercial||(a.filters.price=2),a.priceFilter.free&&!a.priceFilter.commercial&&(a.filters.price=0),!a.priceFilter.free&&a.priceFilter.commercial&&(a.filters.price=1)};a.filterByCategory=function(b){return a.filter.check[b.category]},a.addCategoryFilter=function(b){d(a.filter.unchosen,b),a.filter.chosen.push(b),a.filter.check[b]=!0,d(a.filters.categories,b.id)},a.removeCategoryFilter=function(b){d(a.filter.chosen,b),a.filter.unchosen.push(b),a.filter.check[b]=!1,a.filters.categories.push(b.id)};var j=function(){a.authenticated&&null!=a.profiles&&b.get("/api/userProfiles/?format=json&profile="+(10-a.profiles[0].value)+","+(10-a.profiles[1].value)+","+(10-a.profiles[2].value)+","+(10-a.profiles[3].value)+","+(10-a.profiles[4].value)+","+(10-a.profiles[5].value)+","+(10-a.profiles[6].value)).then(function(b){a.installedApps=b.data})}}]),function(){var a,b="angularUtils.directives.dirPagination",c="__default";try{a=angular.module(b)}catch(d){a=angular.module(b,[])}a.directive("dirPaginate",["$compile","$parse","paginationService",function(a,b,d){return{terminal:!0,multiElement:!0,priority:5e3,compile:function(e,f){var g=f.dirPaginate,h=g.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),i=/\|\s*itemsPerPage\s*:[^|]*/;if(null===h[2].match(i))throw"pagination directive: the 'itemsPerPage' filter must be set.";var j=h[2].replace(i,""),k=b(j),l=f.paginationId||c;return d.registerInstance(l),function(e,f,h){var i=b(h.paginationId)(e)||h.paginationId||c;d.registerInstance(i);var j,l=!!g.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);j=i===c||l?g:g.replace(/(\|\s*itemsPerPage\s*:[^|]*)/,"$1 : '"+i+"'"),f[0].hasAttribute("dir-paginate-start")||f[0].hasAttribute("data-dir-paginate-start")?(h.$set("ngRepeatStart",j),f.eq(f.length-1).attr("ng-repeat-end",!0)):h.$set("ngRepeat",j);var m,n=a(f,!1,5e3);if(h.currentPage)m=b(h.currentPage);else{var o=i+"__currentPage";e[o]=1,m=b(o)}d.setCurrentPageParser(i,m,e),"undefined"!=typeof h.totalItems?(d.setAsyncModeTrue(i),e.$watch(function(){return b(h.totalItems)(e)},function(a){a>=0&&d.setCollectionLength(i,a)})):e.$watchCollection(function(){return k(e)},function(a){a&&d.setCollectionLength(i,a.length)}),n(e)}}}}]),a.directive("dirPaginationControls",["paginationService","paginationTemplate",function(a,b){function d(a,b,c,d){var f,g=[],h=Math.ceil(b/c),i=Math.ceil(d/2);f=i>=a?"start":a>h-i?"end":"middle";for(var j=h>d,k=1;h>=k&&d>=k;){var l=e(k,a,d,h),m=2===k&&("middle"===f||"end"===f),n=k===d-1&&("middle"===f||"start"===f);g.push(j&&(m||n)?"...":l),k++}return g}function e(a,b,c,d){var e=Math.ceil(c/2);return a===c?d:1===a?a:d>c?b>d-e?d-c+a:b>e?b-e+a:a:a}var f=/^\d+$/;return{restrict:"AE",templateUrl:function(a,c){return c.templateUrl||b.getPath()},scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?"},link:function(b,e,g){function h(c){k(c)&&(b.pages=d(c,a.getCollectionLength(m),a.getItemsPerPage(m),o),b.pagination.current=c,j(),b.onPageChange&&b.onPageChange({newPageNumber:c}))}function i(){var c=parseInt(a.getCurrentPage(m))||1;b.pages=d(c,a.getCollectionLength(m),a.getItemsPerPage(m),o),b.pagination.current=c,b.pagination.last=b.pages[b.pages.length-1],b.pagination.last<b.pagination.current?b.setCurrent(b.pagination.last):j()}function j(){var c=a.getCurrentPage(m),d=a.getItemsPerPage(m),e=a.getCollectionLength(m);b.range.lower=(c-1)*d+1,b.range.upper=Math.min(c*d,e),b.range.total=e}function k(a){return f.test(a)&&a>0&&a<=b.pagination.last}var l=g.paginationId||c,m=b.paginationId||g.paginationId||c;if(!a.isRegistered(m)&&!a.isRegistered(l)){var n=m!==c?" (id: "+m+") ":" ";throw"pagination directive: the pagination controls"+n+"cannot be used without the corresponding pagination directive."}b.maxSize||(b.maxSize=9),b.directionLinks=angular.isDefined(g.directionLinks)?b.$parent.$eval(g.directionLinks):!0,b.boundaryLinks=angular.isDefined(g.boundaryLinks)?b.$parent.$eval(g.boundaryLinks):!1;var o=Math.max(b.maxSize,5);b.pages=[],b.pagination={last:1,current:1},b.range={lower:1,upper:1,total:1},b.$watch(function(){return(a.getCollectionLength(m)+1)*a.getItemsPerPage(m)},function(a){a>0&&i()}),b.$watch(function(){return a.getItemsPerPage(m)},function(a,c){a!=c&&h(b.pagination.current)}),b.$watch(function(){return a.getCurrentPage(m)},function(a,b){a!=b&&h(a)}),b.setCurrent=function(b){k(b)&&a.setCurrentPage(m,b)}}}}]),a.filter("itemsPerPage",["paginationService",function(a){return function(b,d,e){if("undefined"==typeof e&&(e=c),!a.isRegistered(e))throw"pagination directive: the itemsPerPage id argument (id: "+e+") does not match a registered pagination-id.";var f,g;return b instanceof Array?(d=parseInt(d)||9999999999,g=a.isAsyncMode(e)?0:(a.getCurrentPage(e)-1)*d,f=g+d,a.setItemsPerPage(e,d),b.slice(g,f)):b}}]),a.service("paginationService",function(){var a,b={};this.registerInstance=function(c){"undefined"==typeof b[c]&&(b[c]={asyncMode:!1},a=c)},this.isRegistered=function(a){return"undefined"!=typeof b[a]},this.getLastInstanceId=function(){return a},this.setCurrentPageParser=function(a,c,d){b[a].currentPageParser=c,b[a].context=d},this.setCurrentPage=function(a,c){b[a].currentPageParser.assign(b[a].context,c)},this.getCurrentPage=function(a){var c=b[a].currentPageParser;return c?c(b[a].context):1},this.setItemsPerPage=function(a,c){b[a].itemsPerPage=c},this.getItemsPerPage=function(a){return b[a].itemsPerPage},this.setCollectionLength=function(a,c){b[a].collectionLength=c},this.getCollectionLength=function(a){return b[a].collectionLength},this.setAsyncModeTrue=function(a){b[a].asyncMode=!0},this.isAsyncMode=function(a){return b[a].asyncMode}}),a.provider("paginationTemplate",function(){var a="/views/dirPagination.tpl.html";this.setPath=function(b){a=b},this.$get=function(){return{getPath:function(){return a}}}})}(),angular.module("appagooApp").directive("icheck",["$timeout","$parse",function(a){return{require:"ngModel",link:function(b,c,d,e){return a(function(){var a;return a=d.value,b.$watch(d.ngModel,function(){$(c).iCheck("update")}),$(c).iCheck({checkboxClass:"icheckbox_flat",radioClass:"iradio_flat"}).on("ifChanged",function(f){return"checkbox"===$(c).attr("type")&&d.ngModel&&b.$apply(function(){return e.$setViewValue(f.target.checked)}),"radio"===$(c).attr("type")&&d.ngModel?b.$apply(function(){return e.$setViewValue(a)}):void 0})})}}}]);var filters=angular.module("app.filters",[]);filters.filter("makeFilterItems",function(){return function(a,b,c){if(b===!1)return a;if((b||angular.isUndefined(b))&&angular.isArray(a)){var d={};d.check={},d.unchosen=[],d.chosen=[];var e=function(a){return angular.isObject(a)&&angular.isString(b)?a[b]:a};return a.sort(function(a,c){return a[b]>c[b]?1:a[b]<c[b]?-1:0}),angular.forEach(a,function(a){for(var f=!1,g=0;g<d.chosen.length;g++)if(angular.equals(e(d.chosen[g]),e(a))){f=!0;break}c?a[b]&&(d.check[a]=!0,f||d.chosen.push(a)):f||(d.check[a]=!0,d.chosen.push(a))}),d}}}),angular.module("appagooApp").directive("saveProfiler",function(){return{template:"<div></div>",restrict:"E",link:function(a,b){b.text("this is the saveProfiler directive")}}}),angular.module("appagooApp").directive("passwordMatch",function(){return{restrict:"A",scope:!1,require:"ngModel",link:function(a,b,c,d){var e=function(){var b=a.$eval(c.ngModel),d=a.$eval(c.passwordMatch);return b===d};a.$watch(e,function(a){d.$setValidity("match",a)})}}}).directive("remoteValidated",function(){return{restrict:"A",scope:!1,require:"ngModel",link:function(a,b,c,d){var e=[];a.$watch(c.ngModel,function(a,b){if(a){if(-1!==e.indexOf(a))return d.$setValidity(c.remoteValidated,!1);d.$error[c.remoteValidated]&&e.push(b),d.$setValidity(c.remoteValidated,!0)}})}}}),angular.module("appagooApp").controller("LoginCtrl",["$scope","$rootScope","$http","ngDialog","$cookies",function(a,b,c){function d(a,b,c,d){var e=screen.width/2-c/2,f=screen.height/2-d/2;return window.open(a,b,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+c+", height="+d+", top="+f+", left="+e)}function e(a,b,c,d){var e=screen.width/2-c/2,f=screen.height/2-d/2;return window.open(a,b,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=no, copyhistory=no, width="+c+", height="+d+", top="+f+", left="+e)}a.clickToPrivacy=function(){e("/privacy","Terms and conditions",860,655)},a.clickToImpressum=function(){e("/impressum","Terms and conditions",860,655)},a.clickToConditions=function(){e("/conditions","Terms and conditions",860,655)},a.clickToAbout=function(){d("/about","About",480,655)},a.clickToContact=function(){d("/contact","Contact",480,655)},a.clickToLogin=function(){d("/accounts/login","Log In",480,655)},a.authenticated=!1,c.get("/api/users/?format=json").then(function(c){c.data&&(a.authenticated=!0,a.user=c.data,b.$broadcast("user:login",c.data))})}]),angular.module("appagooApp").controller("CheckCtrl",["$scope","$http",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var c=function(){b.get("/api/userProfiles/?format=json").then(function(b){a.installedApps=b.data})};a.$on("user:login",function(){c()})}]);